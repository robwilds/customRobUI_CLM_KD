
<ng-container *ngIf="data.state === 'expanded'; else iconMenu">
    <mat-accordion
        class="hxp-nav-accordion hxp-sidenav-process-management-container"
    >
        <mat-expansion-panel #expansionPanel
            class="hxp-panel-dropdown" [expanded]="!!currentFilter">
            <mat-expansion-panel-header
                class="hxp-panel-header"
                [class.hxp-panel-header--active]="(isTasksRouteActive || isProcessRouteActive) && !expansionPanel.expanded"
            >
                <mat-panel-title>
                    <div class="hxp-panel-title">
                        {{
                            'PROCESS_CLOUD_EXTENSION.SIDE_NAV_TITLE' | translate
                        }}
                    </div>
                </mat-panel-title>
            </mat-expansion-panel-header>
            <div class="hxp-filters-title">
                <span>{{
                    'PROCESS_CLOUD_EXTENSION.TASK_LIST.TASKS' | translate
                }}</span>
            </div>
            <hxp-sidenav-task-list
                *ngIf="appName"
                [appName]="appName"
                [currentFilter]="isTasksRouteActive ? currentFilter : {}"
            />
            <div class="hxp-filters-title hxp-filters-title--margin">
                <span>{{
                    'PROCESS_CLOUD_EXTENSION.PROCESS_LIST.PROCESSES' | translate
                }}</span>
            </div>
            <hxp-sidenav-process-list
                *ngIf="appName"
                [appName]="appName"
                [currentFilter]="isProcessRouteActive ? currentFilter : {}"
            />
        </mat-expansion-panel>
    </mat-accordion>
</ng-container>

<ng-template #iconMenu>
    <button
        [matMenuTriggerFor]="menu"
        class="apa-action-button"
        mat-icon-button
    >
        <adf-icon value="adf:ic-process" class="apa-filters-icon" />
    </button>

    <mat-menu #menu="matMenu" [overlapTrigger]="false">
        <div class="hxp-sidenav-collapsed">
            <hxp-sidenav-task-list
                *ngIf="appName"
                [appName]="appName"
                [currentFilter]="currentFilter"
            />
            <hxp-sidenav-process-list
                *ngIf="appName"
                [appName]="appName"
                [currentFilter]="currentFilter"
            />
        </div>
    </mat-menu>
</ng-template>
